"use strict";
/*
 * ATTENTION: An "eval-source-map" devtool has been used.
 * This devtool is neither made for production nor for readable output files.
 * It uses "eval()" calls to create a separate source file with attached SourceMaps in the browser devtools.
 * If you are trying to read the output file, select a different devtool (https://webpack.js.org/configuration/devtool/)
 * or disable the default devtool with "devtool: false".
 * If you are looking for production-ready output files, see mode: "production" (https://webpack.js.org/configuration/mode/).
 */
(() => {
var exports = {};
exports.id = "pages/api/analyze-combined";
exports.ids = ["pages/api/analyze-combined"];
exports.modules = {

/***/ "form-data":
/*!****************************!*\
  !*** external "form-data" ***!
  \****************************/
/***/ ((module) => {

module.exports = require("form-data");

/***/ }),

/***/ "next/dist/compiled/next-server/pages-api.runtime.dev.js":
/*!**************************************************************************!*\
  !*** external "next/dist/compiled/next-server/pages-api.runtime.dev.js" ***!
  \**************************************************************************/
/***/ ((module) => {

module.exports = require("next/dist/compiled/next-server/pages-api.runtime.dev.js");

/***/ }),

/***/ "node-fetch":
/*!*****************************!*\
  !*** external "node-fetch" ***!
  \*****************************/
/***/ ((module) => {

module.exports = require("node-fetch");

/***/ }),

/***/ "fs":
/*!*********************!*\
  !*** external "fs" ***!
  \*********************/
/***/ ((module) => {

module.exports = require("fs");

/***/ }),

/***/ "path":
/*!***********************!*\
  !*** external "path" ***!
  \***********************/
/***/ ((module) => {

module.exports = require("path");

/***/ }),

/***/ "formidable":
/*!*****************************!*\
  !*** external "formidable" ***!
  \*****************************/
/***/ ((module) => {

module.exports = import("formidable");;

/***/ }),

/***/ "(api)/./node_modules/next/dist/build/webpack/loaders/next-route-loader/index.js?kind=PAGES_API&page=%2Fapi%2Fanalyze-combined&preferredRegion=&absolutePagePath=.%2Fpages%5Capi%5Canalyze-combined.js&middlewareConfigBase64=e30%3D!":
/*!**************************************************************************************************************************************************************************************************************************************!*\
  !*** ./node_modules/next/dist/build/webpack/loaders/next-route-loader/index.js?kind=PAGES_API&page=%2Fapi%2Fanalyze-combined&preferredRegion=&absolutePagePath=.%2Fpages%5Capi%5Canalyze-combined.js&middlewareConfigBase64=e30%3D! ***!
  \**************************************************************************************************************************************************************************************************************************************/
/***/ ((module, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.a(module, async (__webpack_handle_async_dependencies__, __webpack_async_result__) => { try {\n__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   config: () => (/* binding */ config),\n/* harmony export */   \"default\": () => (__WEBPACK_DEFAULT_EXPORT__),\n/* harmony export */   routeModule: () => (/* binding */ routeModule)\n/* harmony export */ });\n/* harmony import */ var next_dist_server_future_route_modules_pages_api_module_compiled__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! next/dist/server/future/route-modules/pages-api/module.compiled */ \"(api)/./node_modules/next/dist/server/future/route-modules/pages-api/module.compiled.js\");\n/* harmony import */ var next_dist_server_future_route_modules_pages_api_module_compiled__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(next_dist_server_future_route_modules_pages_api_module_compiled__WEBPACK_IMPORTED_MODULE_0__);\n/* harmony import */ var next_dist_server_future_route_kind__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! next/dist/server/future/route-kind */ \"(api)/./node_modules/next/dist/server/future/route-kind.js\");\n/* harmony import */ var next_dist_build_templates_helpers__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! next/dist/build/templates/helpers */ \"(api)/./node_modules/next/dist/build/templates/helpers.js\");\n/* harmony import */ var _pages_api_analyze_combined_js__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ./pages\\api\\analyze-combined.js */ \"(api)/./pages/api/analyze-combined.js\");\nvar __webpack_async_dependencies__ = __webpack_handle_async_dependencies__([_pages_api_analyze_combined_js__WEBPACK_IMPORTED_MODULE_3__]);\n_pages_api_analyze_combined_js__WEBPACK_IMPORTED_MODULE_3__ = (__webpack_async_dependencies__.then ? (await __webpack_async_dependencies__)() : __webpack_async_dependencies__)[0];\n\n\n\n// Import the userland code.\n\n// Re-export the handler (should be the default export).\n/* harmony default export */ const __WEBPACK_DEFAULT_EXPORT__ = ((0,next_dist_build_templates_helpers__WEBPACK_IMPORTED_MODULE_2__.hoist)(_pages_api_analyze_combined_js__WEBPACK_IMPORTED_MODULE_3__, \"default\"));\n// Re-export config.\nconst config = (0,next_dist_build_templates_helpers__WEBPACK_IMPORTED_MODULE_2__.hoist)(_pages_api_analyze_combined_js__WEBPACK_IMPORTED_MODULE_3__, \"config\");\n// Create and export the route module that will be consumed.\nconst routeModule = new next_dist_server_future_route_modules_pages_api_module_compiled__WEBPACK_IMPORTED_MODULE_0__.PagesAPIRouteModule({\n    definition: {\n        kind: next_dist_server_future_route_kind__WEBPACK_IMPORTED_MODULE_1__.RouteKind.PAGES_API,\n        page: \"/api/analyze-combined\",\n        pathname: \"/api/analyze-combined\",\n        // The following aren't used in production.\n        bundlePath: \"\",\n        filename: \"\"\n    },\n    userland: _pages_api_analyze_combined_js__WEBPACK_IMPORTED_MODULE_3__\n});\n\n//# sourceMappingURL=pages-api.js.map\n__webpack_async_result__();\n} catch(e) { __webpack_async_result__(e); } });//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKGFwaSkvLi9ub2RlX21vZHVsZXMvbmV4dC9kaXN0L2J1aWxkL3dlYnBhY2svbG9hZGVycy9uZXh0LXJvdXRlLWxvYWRlci9pbmRleC5qcz9raW5kPVBBR0VTX0FQSSZwYWdlPSUyRmFwaSUyRmFuYWx5emUtY29tYmluZWQmcHJlZmVycmVkUmVnaW9uPSZhYnNvbHV0ZVBhZ2VQYXRoPS4lMkZwYWdlcyU1Q2FwaSU1Q2FuYWx5emUtY29tYmluZWQuanMmbWlkZGxld2FyZUNvbmZpZ0Jhc2U2ND1lMzAlM0QhIiwibWFwcGluZ3MiOiI7Ozs7Ozs7Ozs7Ozs7O0FBQXNHO0FBQ3ZDO0FBQ0w7QUFDMUQ7QUFDOEQ7QUFDOUQ7QUFDQSxpRUFBZSx3RUFBSyxDQUFDLDJEQUFRLFlBQVksRUFBQztBQUMxQztBQUNPLGVBQWUsd0VBQUssQ0FBQywyREFBUTtBQUNwQztBQUNPLHdCQUF3QixnSEFBbUI7QUFDbEQ7QUFDQSxjQUFjLHlFQUFTO0FBQ3ZCO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxLQUFLO0FBQ0wsWUFBWTtBQUNaLENBQUM7O0FBRUQscUMiLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly9zY2VuZXNvdW5kLz80NDg2Il0sInNvdXJjZXNDb250ZW50IjpbImltcG9ydCB7IFBhZ2VzQVBJUm91dGVNb2R1bGUgfSBmcm9tIFwibmV4dC9kaXN0L3NlcnZlci9mdXR1cmUvcm91dGUtbW9kdWxlcy9wYWdlcy1hcGkvbW9kdWxlLmNvbXBpbGVkXCI7XG5pbXBvcnQgeyBSb3V0ZUtpbmQgfSBmcm9tIFwibmV4dC9kaXN0L3NlcnZlci9mdXR1cmUvcm91dGUta2luZFwiO1xuaW1wb3J0IHsgaG9pc3QgfSBmcm9tIFwibmV4dC9kaXN0L2J1aWxkL3RlbXBsYXRlcy9oZWxwZXJzXCI7XG4vLyBJbXBvcnQgdGhlIHVzZXJsYW5kIGNvZGUuXG5pbXBvcnQgKiBhcyB1c2VybGFuZCBmcm9tIFwiLi9wYWdlc1xcXFxhcGlcXFxcYW5hbHl6ZS1jb21iaW5lZC5qc1wiO1xuLy8gUmUtZXhwb3J0IHRoZSBoYW5kbGVyIChzaG91bGQgYmUgdGhlIGRlZmF1bHQgZXhwb3J0KS5cbmV4cG9ydCBkZWZhdWx0IGhvaXN0KHVzZXJsYW5kLCBcImRlZmF1bHRcIik7XG4vLyBSZS1leHBvcnQgY29uZmlnLlxuZXhwb3J0IGNvbnN0IGNvbmZpZyA9IGhvaXN0KHVzZXJsYW5kLCBcImNvbmZpZ1wiKTtcbi8vIENyZWF0ZSBhbmQgZXhwb3J0IHRoZSByb3V0ZSBtb2R1bGUgdGhhdCB3aWxsIGJlIGNvbnN1bWVkLlxuZXhwb3J0IGNvbnN0IHJvdXRlTW9kdWxlID0gbmV3IFBhZ2VzQVBJUm91dGVNb2R1bGUoe1xuICAgIGRlZmluaXRpb246IHtcbiAgICAgICAga2luZDogUm91dGVLaW5kLlBBR0VTX0FQSSxcbiAgICAgICAgcGFnZTogXCIvYXBpL2FuYWx5emUtY29tYmluZWRcIixcbiAgICAgICAgcGF0aG5hbWU6IFwiL2FwaS9hbmFseXplLWNvbWJpbmVkXCIsXG4gICAgICAgIC8vIFRoZSBmb2xsb3dpbmcgYXJlbid0IHVzZWQgaW4gcHJvZHVjdGlvbi5cbiAgICAgICAgYnVuZGxlUGF0aDogXCJcIixcbiAgICAgICAgZmlsZW5hbWU6IFwiXCJcbiAgICB9LFxuICAgIHVzZXJsYW5kXG59KTtcblxuLy8jIHNvdXJjZU1hcHBpbmdVUkw9cGFnZXMtYXBpLmpzLm1hcCJdLCJuYW1lcyI6W10sInNvdXJjZVJvb3QiOiIifQ==\n//# sourceURL=webpack-internal:///(api)/./node_modules/next/dist/build/webpack/loaders/next-route-loader/index.js?kind=PAGES_API&page=%2Fapi%2Fanalyze-combined&preferredRegion=&absolutePagePath=.%2Fpages%5Capi%5Canalyze-combined.js&middlewareConfigBase64=e30%3D!\n");

/***/ }),

/***/ "(api)/./pages/api/analyze-combined.js":
/*!***************************************!*\
  !*** ./pages/api/analyze-combined.js ***!
  \***************************************/
/***/ ((module, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.a(module, async (__webpack_handle_async_dependencies__, __webpack_async_result__) => { try {\n__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   config: () => (/* binding */ config),\n/* harmony export */   \"default\": () => (/* binding */ handler)\n/* harmony export */ });\n/* harmony import */ var formidable__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! formidable */ \"formidable\");\n/* harmony import */ var _utils_spotify__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ../../utils/spotify */ \"(api)/./utils/spotify.js\");\n/* harmony import */ var _utils_imageAnalysis__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ../../utils/imageAnalysis */ \"(api)/./utils/imageAnalysis.js\");\nvar __webpack_async_dependencies__ = __webpack_handle_async_dependencies__([formidable__WEBPACK_IMPORTED_MODULE_0__]);\nformidable__WEBPACK_IMPORTED_MODULE_0__ = (__webpack_async_dependencies__.then ? (await __webpack_async_dependencies__)() : __webpack_async_dependencies__)[0];\n\n\n\nconst config = {\n    api: {\n        bodyParser: false\n    }\n};\n// 关键词到场景的映射\nconst KEYWORD_MAPPINGS = {\n    // 自然场景\n    nature: [\n        \"nature\",\n        \"forest\",\n        \"mountain\",\n        \"garden\",\n        \"tree\",\n        \"flower\",\n        \"grass\",\n        \"park\"\n    ],\n    beach: [\n        \"beach\",\n        \"ocean\",\n        \"sea\",\n        \"wave\",\n        \"sand\",\n        \"sunset\",\n        \"coast\",\n        \"tropical\"\n    ],\n    city: [\n        \"city\",\n        \"urban\",\n        \"street\",\n        \"building\",\n        \"downtown\",\n        \"traffic\",\n        \"modern\"\n    ],\n    night: [\n        \"night\",\n        \"dark\",\n        \"star\",\n        \"moon\",\n        \"evening\",\n        \"midnight\"\n    ],\n    // 情绪/氛围\n    party: [\n        \"party\",\n        \"dance\",\n        \"celebration\",\n        \"fun\",\n        \"festival\",\n        \"club\"\n    ],\n    calm: [\n        \"calm\",\n        \"peaceful\",\n        \"quiet\",\n        \"relax\",\n        \"meditation\",\n        \"zen\"\n    ],\n    energetic: [\n        \"energetic\",\n        \"active\",\n        \"workout\",\n        \"exercise\",\n        \"running\",\n        \"gym\"\n    ],\n    romantic: [\n        \"romantic\",\n        \"love\",\n        \"date\",\n        \"couple\",\n        \"wedding\"\n    ],\n    melancholic: [\n        \"sad\",\n        \"rain\",\n        \"lonely\",\n        \"melancholy\",\n        \"nostalgic\"\n    ],\n    epic: [\n        \"epic\",\n        \"grand\",\n        \"dramatic\",\n        \"powerful\",\n        \"intense\"\n    ]\n};\n// 场景到音乐风格的映射\nconst STYLE_MAPPINGS = {\n    nature: [\n        \"ambient\",\n        \"acoustic\",\n        \"folk\"\n    ],\n    beach: [\n        \"tropical house\",\n        \"reggae\",\n        \"chill\"\n    ],\n    city: [\n        \"electronic\",\n        \"pop\",\n        \"hip-hop\"\n    ],\n    night: [\n        \"deep house\",\n        \"jazz\",\n        \"lofi\"\n    ],\n    party: [\n        \"dance\",\n        \"pop\",\n        \"electronic\"\n    ],\n    calm: [\n        \"classical\",\n        \"ambient\",\n        \"piano\"\n    ],\n    energetic: [\n        \"rock\",\n        \"electronic\",\n        \"pop\"\n    ],\n    romantic: [\n        \"r&b\",\n        \"soul\",\n        \"jazz\"\n    ],\n    melancholic: [\n        \"indie\",\n        \"alternative\",\n        \"acoustic\"\n    ],\n    epic: [\n        \"orchestral\",\n        \"cinematic\",\n        \"rock\"\n    ],\n    general: [\n        \"pop\",\n        \"rock\",\n        \"electronic\"\n    ]\n};\nfunction analyzeText(text) {\n    if (!text || typeof text !== \"string\") {\n        console.log(\"无效的文本输入:\", text);\n        return [\n            {\n                scene: \"general\",\n                probability: 0.8\n            }\n        ];\n    }\n    const scenes = new Set();\n    const textLower = text.toLowerCase().trim();\n    const words = textLower.split(/[\\s,.!?]+/); // 更好的分词\n    console.log(\"分析的单词:\", words);\n    // 遍历每个关键词映射\n    Object.entries(KEYWORD_MAPPINGS).forEach(([scene, keywords])=>{\n        // 检查每个关键词\n        keywords.forEach((keyword)=>{\n            if (words.some((word)=>word.includes(keyword) || keyword.includes(word))) {\n                scenes.add({\n                    scene: scene,\n                    probability: 0.9\n                });\n            }\n        });\n    });\n    // 如果没有找到任何场景，返回默认场景\n    if (scenes.size === 0) {\n        scenes.add({\n            scene: \"general\",\n            probability: 0.8\n        });\n    }\n    const result = Array.from(scenes);\n    console.log(\"文字分析结果:\", result);\n    return result;\n}\nasync function handler(req, res) {\n    if (req.method !== \"POST\") {\n        return res.status(405).json({\n            success: false,\n            error: \"Method not allowed\"\n        });\n    }\n    try {\n        console.log(\"开始处理请求...\");\n        const form = new formidable__WEBPACK_IMPORTED_MODULE_0__.IncomingForm();\n        form.multiples = true; // 支持多文件上传\n        const { fields, files } = await new Promise((resolve, reject)=>{\n            form.parse(req, (err, fields, files)=>{\n                if (err) reject(err);\n                resolve({\n                    fields,\n                    files\n                });\n            });\n        });\n        const imageFile = files.image?.[0] || files.image; // 处理可能的数组情况\n        const textInput = Array.isArray(fields.text) ? fields.text[0] : fields.text;\n        console.log(\"接收到的数据:\", {\n            hasImage: !!imageFile,\n            imageFileName: imageFile?.originalFilename || \"无\",\n            textInput: textInput || \"无\"\n        });\n        if (!imageFile && !textInput) {\n            return res.status(400).json({\n                success: false,\n                error: \"No image or text provided\"\n            });\n        }\n        // 分析图片和文字\n        let scenes = [];\n        // 分析图片\n        if (imageFile) {\n            console.log(\"分析图片:\", imageFile.originalFilename);\n            const imageScenes = await (0,_utils_imageAnalysis__WEBPACK_IMPORTED_MODULE_2__.analyzeImage)(imageFile);\n            console.log(\"图片分析结果:\", imageScenes);\n            scenes.push(...imageScenes);\n        }\n        // 分析文字\n        if (textInput) {\n            console.log(\"分析文字输入:\", textInput);\n            const textScenes = analyzeText(textInput);\n            console.log(\"文字分析结果:\", textScenes);\n            scenes.push(...textScenes);\n        }\n        // 去重场景\n        scenes = Array.from(new Set(scenes.map(JSON.stringify))).map(JSON.parse);\n        console.log(\"合并后的场景:\", scenes);\n        // 如果没有识别出任何场景，使用默认场景\n        if (scenes.length === 0) {\n            console.log(\"使用默认场景\");\n            scenes.push({\n                scene: \"general\",\n                probability: 0.8\n            });\n        }\n        // 获取音乐风格\n        const styles = new Set();\n        scenes.forEach((scene)=>{\n            const mappedStyles = STYLE_MAPPINGS[scene.scene] || STYLE_MAPPINGS.general;\n            mappedStyles.forEach((style)=>styles.add(style));\n        });\n        const uniqueStyles = Array.from(styles);\n        console.log(\"选择的音乐风格:\", uniqueStyles);\n        // 获取Spotify访问令牌\n        console.log(\"正在获取 Spotify 访问令牌...\");\n        const accessToken = await (0,_utils_spotify__WEBPACK_IMPORTED_MODULE_1__.getSpotifyToken)();\n        console.log(\"成功获取访问令牌\");\n        // 获取推荐歌曲\n        console.log(\"开始获取推荐歌曲...\");\n        const playlist = [];\n        for (const style of uniqueStyles){\n            const tracks = await (0,_utils_spotify__WEBPACK_IMPORTED_MODULE_1__.searchTracks)(accessToken, style);\n            console.log(`风格 \"${style}\" 找到 ${tracks.length} 首歌曲`);\n            playlist.push(...tracks);\n        }\n        // 去重歌曲（基于歌曲ID）\n        const uniquePlaylist = Array.from(new Set(playlist.map((track)=>track.id))).map((id)=>playlist.find((track)=>track.id === id));\n        console.log(`总共找到 ${uniquePlaylist.length} 首不重复歌曲`);\n        // 随机打乱并限制歌曲数量\n        const shuffledPlaylist = uniquePlaylist.sort(()=>Math.random() - 0.5).slice(0, 12);\n        console.log(`最终选择 ${shuffledPlaylist.length} 首歌曲`);\n        return res.status(200).json({\n            success: true,\n            data: {\n                scenes,\n                styles: uniqueStyles,\n                playlist: shuffledPlaylist\n            }\n        });\n    } catch (error) {\n        console.error(\"处理请求时出错:\", error);\n        return res.status(500).json({\n            success: false,\n            error: error.message || \"Failed to analyze image and text\"\n        });\n    }\n}\n\n__webpack_async_result__();\n} catch(e) { __webpack_async_result__(e); } });//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,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c291cmNlcyI6WyJ3ZWJwYWNrOi8vc2NlbmVzb3VuZC8uL3BhZ2VzL2FwaS9hbmFseXplLWNvbWJpbmVkLmpzPzFlNGEiXSwic291cmNlc0NvbnRlbnQiOlsiaW1wb3J0IHsgSW5jb21pbmdGb3JtIH0gZnJvbSAnZm9ybWlkYWJsZSc7XHJcbmltcG9ydCB7IGdldFNwb3RpZnlUb2tlbiwgc2VhcmNoVHJhY2tzIH0gZnJvbSAnLi4vLi4vdXRpbHMvc3BvdGlmeSc7XHJcbmltcG9ydCB7IGFuYWx5emVJbWFnZSB9IGZyb20gJy4uLy4uL3V0aWxzL2ltYWdlQW5hbHlzaXMnO1xyXG5cclxuZXhwb3J0IGNvbnN0IGNvbmZpZyA9IHtcclxuICBhcGk6IHtcclxuICAgIGJvZHlQYXJzZXI6IGZhbHNlLFxyXG4gIH0sXHJcbn07XHJcblxyXG4vLyDlhbPplK7or43liLDlnLrmma/nmoTmmKDlsIRcclxuY29uc3QgS0VZV09SRF9NQVBQSU5HUyA9IHtcclxuICAvLyDoh6rnhLblnLrmma9cclxuICBuYXR1cmU6IFsnbmF0dXJlJywgJ2ZvcmVzdCcsICdtb3VudGFpbicsICdnYXJkZW4nLCAndHJlZScsICdmbG93ZXInLCAnZ3Jhc3MnLCAncGFyayddLFxyXG4gIGJlYWNoOiBbJ2JlYWNoJywgJ29jZWFuJywgJ3NlYScsICd3YXZlJywgJ3NhbmQnLCAnc3Vuc2V0JywgJ2NvYXN0JywgJ3Ryb3BpY2FsJ10sXHJcbiAgY2l0eTogWydjaXR5JywgJ3VyYmFuJywgJ3N0cmVldCcsICdidWlsZGluZycsICdkb3dudG93bicsICd0cmFmZmljJywgJ21vZGVybiddLFxyXG4gIG5pZ2h0OiBbJ25pZ2h0JywgJ2RhcmsnLCAnc3RhcicsICdtb29uJywgJ2V2ZW5pbmcnLCAnbWlkbmlnaHQnXSxcclxuICBcclxuICAvLyDmg4Xnu6ov5rCb5Zu0XHJcbiAgcGFydHk6IFsncGFydHknLCAnZGFuY2UnLCAnY2VsZWJyYXRpb24nLCAnZnVuJywgJ2Zlc3RpdmFsJywgJ2NsdWInXSxcclxuICBjYWxtOiBbJ2NhbG0nLCAncGVhY2VmdWwnLCAncXVpZXQnLCAncmVsYXgnLCAnbWVkaXRhdGlvbicsICd6ZW4nXSxcclxuICBlbmVyZ2V0aWM6IFsnZW5lcmdldGljJywgJ2FjdGl2ZScsICd3b3Jrb3V0JywgJ2V4ZXJjaXNlJywgJ3J1bm5pbmcnLCAnZ3ltJ10sXHJcbiAgcm9tYW50aWM6IFsncm9tYW50aWMnLCAnbG92ZScsICdkYXRlJywgJ2NvdXBsZScsICd3ZWRkaW5nJ10sXHJcbiAgbWVsYW5jaG9saWM6IFsnc2FkJywgJ3JhaW4nLCAnbG9uZWx5JywgJ21lbGFuY2hvbHknLCAnbm9zdGFsZ2ljJ10sXHJcbiAgZXBpYzogWydlcGljJywgJ2dyYW5kJywgJ2RyYW1hdGljJywgJ3Bvd2VyZnVsJywgJ2ludGVuc2UnXVxyXG59O1xyXG5cclxuLy8g5Zy65pmv5Yiw6Z+z5LmQ6aOO5qC855qE5pig5bCEXHJcbmNvbnN0IFNUWUxFX01BUFBJTkdTID0ge1xyXG4gIG5hdHVyZTogWydhbWJpZW50JywgJ2Fjb3VzdGljJywgJ2ZvbGsnXSxcclxuICBiZWFjaDogWyd0cm9waWNhbCBob3VzZScsICdyZWdnYWUnLCAnY2hpbGwnXSxcclxuICBjaXR5OiBbJ2VsZWN0cm9uaWMnLCAncG9wJywgJ2hpcC1ob3AnXSxcclxuICBuaWdodDogWydkZWVwIGhvdXNlJywgJ2phenonLCAnbG9maSddLFxyXG4gIHBhcnR5OiBbJ2RhbmNlJywgJ3BvcCcsICdlbGVjdHJvbmljJ10sXHJcbiAgY2FsbTogWydjbGFzc2ljYWwnLCAnYW1iaWVudCcsICdwaWFubyddLFxyXG4gIGVuZXJnZXRpYzogWydyb2NrJywgJ2VsZWN0cm9uaWMnLCAncG9wJ10sXHJcbiAgcm9tYW50aWM6IFsnciZiJywgJ3NvdWwnLCAnamF6eiddLFxyXG4gIG1lbGFuY2hvbGljOiBbJ2luZGllJywgJ2FsdGVybmF0aXZlJywgJ2Fjb3VzdGljJ10sXHJcbiAgZXBpYzogWydvcmNoZXN0cmFsJywgJ2NpbmVtYXRpYycsICdyb2NrJ10sXHJcbiAgZ2VuZXJhbDogWydwb3AnLCAncm9jaycsICdlbGVjdHJvbmljJ11cclxufTtcclxuXHJcbmZ1bmN0aW9uIGFuYWx5emVUZXh0KHRleHQpIHtcclxuICBpZiAoIXRleHQgfHwgdHlwZW9mIHRleHQgIT09ICdzdHJpbmcnKSB7XHJcbiAgICBjb25zb2xlLmxvZygn5peg5pWI55qE5paH5pys6L6T5YWlOicsIHRleHQpO1xyXG4gICAgcmV0dXJuIFt7XHJcbiAgICAgIHNjZW5lOiAnZ2VuZXJhbCcsXHJcbiAgICAgIHByb2JhYmlsaXR5OiAwLjhcclxuICAgIH1dO1xyXG4gIH1cclxuXHJcbiAgY29uc3Qgc2NlbmVzID0gbmV3IFNldCgpO1xyXG4gIGNvbnN0IHRleHRMb3dlciA9IHRleHQudG9Mb3dlckNhc2UoKS50cmltKCk7XHJcbiAgY29uc3Qgd29yZHMgPSB0ZXh0TG93ZXIuc3BsaXQoL1tcXHMsLiE/XSsvKTsgLy8g5pu05aW955qE5YiG6K+NXHJcbiAgY29uc29sZS5sb2coJ+WIhuaekOeahOWNleivjTonLCB3b3Jkcyk7XHJcblxyXG4gIC8vIOmBjeWOhuavj+S4quWFs+mUruivjeaYoOWwhFxyXG4gIE9iamVjdC5lbnRyaWVzKEtFWVdPUkRfTUFQUElOR1MpLmZvckVhY2goKFtzY2VuZSwga2V5d29yZHNdKSA9PiB7XHJcbiAgICAvLyDmo4Dmn6Xmr4/kuKrlhbPplK7or41cclxuICAgIGtleXdvcmRzLmZvckVhY2goa2V5d29yZCA9PiB7XHJcbiAgICAgIGlmICh3b3Jkcy5zb21lKHdvcmQgPT4gd29yZC5pbmNsdWRlcyhrZXl3b3JkKSB8fCBrZXl3b3JkLmluY2x1ZGVzKHdvcmQpKSkge1xyXG4gICAgICAgIHNjZW5lcy5hZGQoe1xyXG4gICAgICAgICAgc2NlbmU6IHNjZW5lLFxyXG4gICAgICAgICAgcHJvYmFiaWxpdHk6IDAuOVxyXG4gICAgICAgIH0pO1xyXG4gICAgICB9XHJcbiAgICB9KTtcclxuICB9KTtcclxuXHJcbiAgLy8g5aaC5p6c5rKh5pyJ5om+5Yiw5Lu75L2V5Zy65pmv77yM6L+U5Zue6buY6K6k5Zy65pmvXHJcbiAgaWYgKHNjZW5lcy5zaXplID09PSAwKSB7XHJcbiAgICBzY2VuZXMuYWRkKHtcclxuICAgICAgc2NlbmU6ICdnZW5lcmFsJyxcclxuICAgICAgcHJvYmFiaWxpdHk6IDAuOFxyXG4gICAgfSk7XHJcbiAgfVxyXG5cclxuICBjb25zdCByZXN1bHQgPSBBcnJheS5mcm9tKHNjZW5lcyk7XHJcbiAgY29uc29sZS5sb2coJ+aWh+Wtl+WIhuaekOe7k+aenDonLCByZXN1bHQpO1xyXG4gIHJldHVybiByZXN1bHQ7XHJcbn1cclxuXHJcbmV4cG9ydCBkZWZhdWx0IGFzeW5jIGZ1bmN0aW9uIGhhbmRsZXIocmVxLCByZXMpIHtcclxuICBpZiAocmVxLm1ldGhvZCAhPT0gJ1BPU1QnKSB7XHJcbiAgICByZXR1cm4gcmVzLnN0YXR1cyg0MDUpLmpzb24oeyBzdWNjZXNzOiBmYWxzZSwgZXJyb3I6ICdNZXRob2Qgbm90IGFsbG93ZWQnIH0pO1xyXG4gIH1cclxuXHJcbiAgdHJ5IHtcclxuICAgIGNvbnNvbGUubG9nKCflvIDlp4vlpITnkIbor7fmsYIuLi4nKTtcclxuICAgIGNvbnN0IGZvcm0gPSBuZXcgSW5jb21pbmdGb3JtKCk7XHJcbiAgICBmb3JtLm11bHRpcGxlcyA9IHRydWU7IC8vIOaUr+aMgeWkmuaWh+S7tuS4iuS8oFxyXG4gICAgXHJcbiAgICBjb25zdCB7IGZpZWxkcywgZmlsZXMgfSA9IGF3YWl0IG5ldyBQcm9taXNlKChyZXNvbHZlLCByZWplY3QpID0+IHtcclxuICAgICAgZm9ybS5wYXJzZShyZXEsIChlcnIsIGZpZWxkcywgZmlsZXMpID0+IHtcclxuICAgICAgICBpZiAoZXJyKSByZWplY3QoZXJyKTtcclxuICAgICAgICByZXNvbHZlKHsgZmllbGRzLCBmaWxlcyB9KTtcclxuICAgICAgfSk7XHJcbiAgICB9KTtcclxuXHJcbiAgICBjb25zdCBpbWFnZUZpbGUgPSBmaWxlcy5pbWFnZT8uWzBdIHx8IGZpbGVzLmltYWdlOyAvLyDlpITnkIblj6/og73nmoTmlbDnu4Tmg4XlhrVcclxuICAgIGNvbnN0IHRleHRJbnB1dCA9IEFycmF5LmlzQXJyYXkoZmllbGRzLnRleHQpID8gZmllbGRzLnRleHRbMF0gOiBmaWVsZHMudGV4dDtcclxuXHJcbiAgICBjb25zb2xlLmxvZygn5o6l5pS25Yiw55qE5pWw5o2uOicsIHtcclxuICAgICAgaGFzSW1hZ2U6ICEhaW1hZ2VGaWxlLFxyXG4gICAgICBpbWFnZUZpbGVOYW1lOiBpbWFnZUZpbGU/Lm9yaWdpbmFsRmlsZW5hbWUgfHwgJ+aXoCcsXHJcbiAgICAgIHRleHRJbnB1dDogdGV4dElucHV0IHx8ICfml6AnXHJcbiAgICB9KTtcclxuXHJcbiAgICBpZiAoIWltYWdlRmlsZSAmJiAhdGV4dElucHV0KSB7XHJcbiAgICAgIHJldHVybiByZXMuc3RhdHVzKDQwMCkuanNvbih7IHN1Y2Nlc3M6IGZhbHNlLCBlcnJvcjogJ05vIGltYWdlIG9yIHRleHQgcHJvdmlkZWQnIH0pO1xyXG4gICAgfVxyXG5cclxuICAgIC8vIOWIhuaekOWbvueJh+WSjOaWh+Wtl1xyXG4gICAgbGV0IHNjZW5lcyA9IFtdO1xyXG4gICAgXHJcbiAgICAvLyDliIbmnpDlm77niYdcclxuICAgIGlmIChpbWFnZUZpbGUpIHtcclxuICAgICAgY29uc29sZS5sb2coJ+WIhuaekOWbvueJhzonLCBpbWFnZUZpbGUub3JpZ2luYWxGaWxlbmFtZSk7XHJcbiAgICAgIGNvbnN0IGltYWdlU2NlbmVzID0gYXdhaXQgYW5hbHl6ZUltYWdlKGltYWdlRmlsZSk7XHJcbiAgICAgIGNvbnNvbGUubG9nKCflm77niYfliIbmnpDnu5Pmnpw6JywgaW1hZ2VTY2VuZXMpO1xyXG4gICAgICBzY2VuZXMucHVzaCguLi5pbWFnZVNjZW5lcyk7XHJcbiAgICB9XHJcblxyXG4gICAgLy8g5YiG5p6Q5paH5a2XXHJcbiAgICBpZiAodGV4dElucHV0KSB7XHJcbiAgICAgIGNvbnNvbGUubG9nKCfliIbmnpDmloflrZfovpPlhaU6JywgdGV4dElucHV0KTtcclxuICAgICAgY29uc3QgdGV4dFNjZW5lcyA9IGFuYWx5emVUZXh0KHRleHRJbnB1dCk7XHJcbiAgICAgIGNvbnNvbGUubG9nKCfmloflrZfliIbmnpDnu5Pmnpw6JywgdGV4dFNjZW5lcyk7XHJcbiAgICAgIHNjZW5lcy5wdXNoKC4uLnRleHRTY2VuZXMpO1xyXG4gICAgfVxyXG5cclxuICAgIC8vIOWOu+mHjeWcuuaZr1xyXG4gICAgc2NlbmVzID0gQXJyYXkuZnJvbShuZXcgU2V0KHNjZW5lcy5tYXAoSlNPTi5zdHJpbmdpZnkpKSkubWFwKEpTT04ucGFyc2UpO1xyXG4gICAgY29uc29sZS5sb2coJ+WQiOW5tuWQjueahOWcuuaZrzonLCBzY2VuZXMpO1xyXG5cclxuICAgIC8vIOWmguaenOayoeacieivhuWIq+WHuuS7u+S9leWcuuaZr++8jOS9v+eUqOm7mOiupOWcuuaZr1xyXG4gICAgaWYgKHNjZW5lcy5sZW5ndGggPT09IDApIHtcclxuICAgICAgY29uc29sZS5sb2coJ+S9v+eUqOm7mOiupOWcuuaZrycpO1xyXG4gICAgICBzY2VuZXMucHVzaCh7XHJcbiAgICAgICAgc2NlbmU6ICdnZW5lcmFsJyxcclxuICAgICAgICBwcm9iYWJpbGl0eTogMC44XHJcbiAgICAgIH0pO1xyXG4gICAgfVxyXG5cclxuICAgIC8vIOiOt+WPlumfs+S5kOmjjuagvFxyXG4gICAgY29uc3Qgc3R5bGVzID0gbmV3IFNldCgpO1xyXG4gICAgc2NlbmVzLmZvckVhY2goc2NlbmUgPT4ge1xyXG4gICAgICBjb25zdCBtYXBwZWRTdHlsZXMgPSBTVFlMRV9NQVBQSU5HU1tzY2VuZS5zY2VuZV0gfHwgU1RZTEVfTUFQUElOR1MuZ2VuZXJhbDtcclxuICAgICAgbWFwcGVkU3R5bGVzLmZvckVhY2goc3R5bGUgPT4gc3R5bGVzLmFkZChzdHlsZSkpO1xyXG4gICAgfSk7XHJcblxyXG4gICAgY29uc3QgdW5pcXVlU3R5bGVzID0gQXJyYXkuZnJvbShzdHlsZXMpO1xyXG4gICAgY29uc29sZS5sb2coJ+mAieaLqeeahOmfs+S5kOmjjuagvDonLCB1bmlxdWVTdHlsZXMpO1xyXG5cclxuICAgIC8vIOiOt+WPllNwb3RpZnnorr/pl67ku6TniYxcclxuICAgIGNvbnNvbGUubG9nKCfmraPlnKjojrflj5YgU3BvdGlmeSDorr/pl67ku6TniYwuLi4nKTtcclxuICAgIGNvbnN0IGFjY2Vzc1Rva2VuID0gYXdhaXQgZ2V0U3BvdGlmeVRva2VuKCk7XHJcbiAgICBjb25zb2xlLmxvZygn5oiQ5Yqf6I635Y+W6K6/6Zeu5Luk54mMJyk7XHJcblxyXG4gICAgLy8g6I635Y+W5o6o6I2Q5q2M5puyXHJcbiAgICBjb25zb2xlLmxvZygn5byA5aeL6I635Y+W5o6o6I2Q5q2M5puyLi4uJyk7XHJcbiAgICBjb25zdCBwbGF5bGlzdCA9IFtdO1xyXG4gICAgZm9yIChjb25zdCBzdHlsZSBvZiB1bmlxdWVTdHlsZXMpIHtcclxuICAgICAgY29uc3QgdHJhY2tzID0gYXdhaXQgc2VhcmNoVHJhY2tzKGFjY2Vzc1Rva2VuLCBzdHlsZSk7XHJcbiAgICAgIGNvbnNvbGUubG9nKGDpo47moLwgXCIke3N0eWxlfVwiIOaJvuWIsCAke3RyYWNrcy5sZW5ndGh9IOmmluatjOabsmApO1xyXG4gICAgICBwbGF5bGlzdC5wdXNoKC4uLnRyYWNrcyk7XHJcbiAgICB9XHJcblxyXG4gICAgLy8g5Y676YeN5q2M5puy77yI5Z+65LqO5q2M5puySUTvvIlcclxuICAgIGNvbnN0IHVuaXF1ZVBsYXlsaXN0ID0gQXJyYXkuZnJvbShuZXcgU2V0KHBsYXlsaXN0Lm1hcCh0cmFjayA9PiB0cmFjay5pZCkpKVxyXG4gICAgICAubWFwKGlkID0+IHBsYXlsaXN0LmZpbmQodHJhY2sgPT4gdHJhY2suaWQgPT09IGlkKSk7XHJcblxyXG4gICAgY29uc29sZS5sb2coYOaAu+WFseaJvuWIsCAke3VuaXF1ZVBsYXlsaXN0Lmxlbmd0aH0g6aaW5LiN6YeN5aSN5q2M5puyYCk7XHJcblxyXG4gICAgLy8g6ZqP5py65omT5Lmx5bm26ZmQ5Yi25q2M5puy5pWw6YePXHJcbiAgICBjb25zdCBzaHVmZmxlZFBsYXlsaXN0ID0gdW5pcXVlUGxheWxpc3RcclxuICAgICAgLnNvcnQoKCkgPT4gTWF0aC5yYW5kb20oKSAtIDAuNSlcclxuICAgICAgLnNsaWNlKDAsIDEyKTtcclxuXHJcbiAgICBjb25zb2xlLmxvZyhg5pyA57uI6YCJ5oupICR7c2h1ZmZsZWRQbGF5bGlzdC5sZW5ndGh9IOmmluatjOabsmApO1xyXG5cclxuICAgIHJldHVybiByZXMuc3RhdHVzKDIwMCkuanNvbih7XHJcbiAgICAgIHN1Y2Nlc3M6IHRydWUsXHJcbiAgICAgIGRhdGE6IHtcclxuICAgICAgICBzY2VuZXMsXHJcbiAgICAgICAgc3R5bGVzOiB1bmlxdWVTdHlsZXMsXHJcbiAgICAgICAgcGxheWxpc3Q6IHNodWZmbGVkUGxheWxpc3RcclxuICAgICAgfVxyXG4gICAgfSk7XHJcblxyXG4gIH0gY2F0Y2ggKGVycm9yKSB7XHJcbiAgICBjb25zb2xlLmVycm9yKCflpITnkIbor7fmsYLml7blh7rplJk6JywgZXJyb3IpO1xyXG4gICAgcmV0dXJuIHJlcy5zdGF0dXMoNTAwKS5qc29uKHtcclxuICAgICAgc3VjY2VzczogZmFsc2UsXHJcbiAgICAgIGVycm9yOiBlcnJvci5tZXNzYWdlIHx8ICdGYWlsZWQgdG8gYW5hbHl6ZSBpbWFnZSBhbmQgdGV4dCdcclxuICAgIH0pO1xyXG4gIH1cclxufSAiXSwibmFtZXMiOlsiSW5jb21pbmdGb3JtIiwiZ2V0U3BvdGlmeVRva2VuIiwic2VhcmNoVHJhY2tzIiwiYW5hbHl6ZUltYWdlIiwiY29uZmlnIiwiYXBpIiwiYm9keVBhcnNlciIsIktFWVdPUkRfTUFQUElOR1MiLCJuYXR1cmUiLCJiZWFjaCIsImNpdHkiLCJuaWdodCIsInBhcnR5IiwiY2FsbSIsImVuZXJnZXRpYyIsInJvbWFudGljIiwibWVsYW5jaG9saWMiLCJlcGljIiwiU1RZTEVfTUFQUElOR1MiLCJnZW5lcmFsIiwiYW5hbHl6ZVRleHQiLCJ0ZXh0IiwiY29uc29sZSIsImxvZyIsInNjZW5lIiwicHJvYmFiaWxpdHkiLCJzY2VuZXMiLCJTZXQiLCJ0ZXh0TG93ZXIiLCJ0b0xvd2VyQ2FzZSIsInRyaW0iLCJ3b3JkcyIsInNwbGl0IiwiT2JqZWN0IiwiZW50cmllcyIsImZvckVhY2giLCJrZXl3b3JkcyIsImtleXdvcmQiLCJzb21lIiwid29yZCIsImluY2x1ZGVzIiwiYWRkIiwic2l6ZSIsInJlc3VsdCIsIkFycmF5IiwiZnJvbSIsImhhbmRsZXIiLCJyZXEiLCJyZXMiLCJtZXRob2QiLCJzdGF0dXMiLCJqc29uIiwic3VjY2VzcyIsImVycm9yIiwiZm9ybSIsIm11bHRpcGxlcyIsImZpZWxkcyIsImZpbGVzIiwiUHJvbWlzZSIsInJlc29sdmUiLCJyZWplY3QiLCJwYXJzZSIsImVyciIsImltYWdlRmlsZSIsImltYWdlIiwidGV4dElucHV0IiwiaXNBcnJheSIsImhhc0ltYWdlIiwiaW1hZ2VGaWxlTmFtZSIsIm9yaWdpbmFsRmlsZW5hbWUiLCJpbWFnZVNjZW5lcyIsInB1c2giLCJ0ZXh0U2NlbmVzIiwibWFwIiwiSlNPTiIsInN0cmluZ2lmeSIsImxlbmd0aCIsInN0eWxlcyIsIm1hcHBlZFN0eWxlcyIsInN0eWxlIiwidW5pcXVlU3R5bGVzIiwiYWNjZXNzVG9rZW4iLCJwbGF5bGlzdCIsInRyYWNrcyIsInVuaXF1ZVBsYXlsaXN0IiwidHJhY2siLCJpZCIsImZpbmQiLCJzaHVmZmxlZFBsYXlsaXN0Iiwic29ydCIsIk1hdGgiLCJyYW5kb20iLCJzbGljZSIsImRhdGEiLCJtZXNzYWdlIl0sInNvdXJjZVJvb3QiOiIifQ==\n//# sourceURL=webpack-internal:///(api)/./pages/api/analyze-combined.js\n");

/***/ }),

/***/ "(api)/./utils/imageAnalysis.js":
/*!********************************!*\
  !*** ./utils/imageAnalysis.js ***!
  \********************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   analyzeImage: () => (/* binding */ analyzeImage)\n/* harmony export */ });\n/* harmony import */ var fs__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! fs */ \"fs\");\n/* harmony import */ var fs__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(fs__WEBPACK_IMPORTED_MODULE_0__);\n/* harmony import */ var path__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! path */ \"path\");\n/* harmony import */ var path__WEBPACK_IMPORTED_MODULE_1___default = /*#__PURE__*/__webpack_require__.n(path__WEBPACK_IMPORTED_MODULE_1__);\n/* harmony import */ var form_data__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! form-data */ \"form-data\");\n/* harmony import */ var form_data__WEBPACK_IMPORTED_MODULE_2___default = /*#__PURE__*/__webpack_require__.n(form_data__WEBPACK_IMPORTED_MODULE_2__);\n/* harmony import */ var node_fetch__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! node-fetch */ \"node-fetch\");\n/* harmony import */ var node_fetch__WEBPACK_IMPORTED_MODULE_3___default = /*#__PURE__*/__webpack_require__.n(node_fetch__WEBPACK_IMPORTED_MODULE_3__);\n\n\n\n\nconst PYTHON_SERVICE_URL = \"http://localhost:5000/analyze\";\n// 预定义的场景关键词映射\nconst SCENE_KEYWORDS = {\n    nature: [\n        \"nature\",\n        \"forest\",\n        \"mountain\",\n        \"garden\",\n        \"tree\",\n        \"flower\",\n        \"grass\",\n        \"park\",\n        \"green\",\n        \"natural\"\n    ],\n    beach: [\n        \"beach\",\n        \"ocean\",\n        \"sea\",\n        \"wave\",\n        \"sand\",\n        \"sunset\",\n        \"coast\",\n        \"tropical\",\n        \"water\",\n        \"shore\"\n    ],\n    city: [\n        \"city\",\n        \"urban\",\n        \"street\",\n        \"building\",\n        \"downtown\",\n        \"traffic\",\n        \"modern\",\n        \"architecture\",\n        \"town\"\n    ],\n    night: [\n        \"night\",\n        \"dark\",\n        \"star\",\n        \"moon\",\n        \"evening\",\n        \"midnight\",\n        \"light\",\n        \"dusk\"\n    ],\n    party: [\n        \"party\",\n        \"dance\",\n        \"celebration\",\n        \"fun\",\n        \"festival\",\n        \"club\",\n        \"concert\",\n        \"disco\"\n    ],\n    calm: [\n        \"calm\",\n        \"peaceful\",\n        \"quiet\",\n        \"relax\",\n        \"meditation\",\n        \"zen\",\n        \"serenity\",\n        \"tranquil\"\n    ],\n    energetic: [\n        \"energetic\",\n        \"active\",\n        \"workout\",\n        \"exercise\",\n        \"running\",\n        \"gym\",\n        \"sport\",\n        \"dynamic\"\n    ],\n    romantic: [\n        \"romantic\",\n        \"love\",\n        \"date\",\n        \"couple\",\n        \"wedding\",\n        \"heart\",\n        \"rose\",\n        \"romance\"\n    ],\n    melancholic: [\n        \"sad\",\n        \"rain\",\n        \"lonely\",\n        \"melancholy\",\n        \"nostalgic\",\n        \"autumn\",\n        \"winter\",\n        \"grey\"\n    ],\n    epic: [\n        \"epic\",\n        \"grand\",\n        \"dramatic\",\n        \"powerful\",\n        \"intense\",\n        \"storm\",\n        \"majestic\",\n        \"vast\"\n    ]\n};\nasync function analyzeImage(file) {\n    try {\n        if (!file || !file.filepath) {\n            console.log(\"无效的文件对象:\", file);\n            return [\n                {\n                    scene: \"general\",\n                    probability: 0.8\n                }\n            ];\n        }\n        console.log(\"正在分析图片:\", file.filepath);\n        // 创建FormData对象\n        const formData = new (form_data__WEBPACK_IMPORTED_MODULE_2___default())();\n        const imageStream = await fs__WEBPACK_IMPORTED_MODULE_0__.promises.readFile(file.filepath);\n        formData.append(\"image\", imageStream, {\n            filename: file.originalFilename,\n            contentType: file.mimetype\n        });\n        // 调用Python服务\n        const response = await node_fetch__WEBPACK_IMPORTED_MODULE_3___default()(PYTHON_SERVICE_URL, {\n            method: \"POST\",\n            body: formData\n        });\n        const result = await response.json();\n        if (!result.success) {\n            console.error(\"Python服务返回错误:\", result.error);\n            return [\n                {\n                    scene: \"general\",\n                    probability: 0.8\n                }\n            ];\n        }\n        console.log(\"场景分析结果:\", result.scenes);\n        return result.scenes;\n    } catch (error) {\n        console.error(\"分析图片时出错:\", error);\n        return [\n            {\n                scene: \"general\",\n                probability: 0.8\n            }\n        ];\n    }\n}\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKGFwaSkvLi91dGlscy9pbWFnZUFuYWx5c2lzLmpzIiwibWFwcGluZ3MiOiI7Ozs7Ozs7Ozs7OztBQUFvQztBQUNaO0FBQ1M7QUFDRjtBQUUvQixNQUFNSyxxQkFBcUI7QUFFM0IsY0FBYztBQUNkLE1BQU1DLGlCQUFpQjtJQUNyQkMsUUFBUTtRQUFDO1FBQVU7UUFBVTtRQUFZO1FBQVU7UUFBUTtRQUFVO1FBQVM7UUFBUTtRQUFTO0tBQVU7SUFDekdDLE9BQU87UUFBQztRQUFTO1FBQVM7UUFBTztRQUFRO1FBQVE7UUFBVTtRQUFTO1FBQVk7UUFBUztLQUFRO0lBQ2pHQyxNQUFNO1FBQUM7UUFBUTtRQUFTO1FBQVU7UUFBWTtRQUFZO1FBQVc7UUFBVTtRQUFnQjtLQUFPO0lBQ3RHQyxPQUFPO1FBQUM7UUFBUztRQUFRO1FBQVE7UUFBUTtRQUFXO1FBQVk7UUFBUztLQUFPO0lBQ2hGQyxPQUFPO1FBQUM7UUFBUztRQUFTO1FBQWU7UUFBTztRQUFZO1FBQVE7UUFBVztLQUFRO0lBQ3ZGQyxNQUFNO1FBQUM7UUFBUTtRQUFZO1FBQVM7UUFBUztRQUFjO1FBQU87UUFBWTtLQUFXO0lBQ3pGQyxXQUFXO1FBQUM7UUFBYTtRQUFVO1FBQVc7UUFBWTtRQUFXO1FBQU87UUFBUztLQUFVO0lBQy9GQyxVQUFVO1FBQUM7UUFBWTtRQUFRO1FBQVE7UUFBVTtRQUFXO1FBQVM7UUFBUTtLQUFVO0lBQ3ZGQyxhQUFhO1FBQUM7UUFBTztRQUFRO1FBQVU7UUFBYztRQUFhO1FBQVU7UUFBVTtLQUFPO0lBQzdGQyxNQUFNO1FBQUM7UUFBUTtRQUFTO1FBQVk7UUFBWTtRQUFXO1FBQVM7UUFBWTtLQUFPO0FBQ3pGO0FBRU8sZUFBZUMsYUFBYUMsSUFBSTtJQUNyQyxJQUFJO1FBQ0YsSUFBSSxDQUFDQSxRQUFRLENBQUNBLEtBQUtDLFFBQVEsRUFBRTtZQUMzQkMsUUFBUUMsR0FBRyxDQUFDLFlBQVlIO1lBQ3hCLE9BQU87Z0JBQUM7b0JBQ05JLE9BQU87b0JBQ1BDLGFBQWE7Z0JBQ2Y7YUFBRTtRQUNKO1FBRUFILFFBQVFDLEdBQUcsQ0FBQyxXQUFXSCxLQUFLQyxRQUFRO1FBRXBDLGVBQWU7UUFDZixNQUFNSyxXQUFXLElBQUlyQixrREFBUUE7UUFDN0IsTUFBTXNCLGNBQWMsTUFBTXhCLHdDQUFFQSxDQUFDeUIsUUFBUSxDQUFDUixLQUFLQyxRQUFRO1FBQ25ESyxTQUFTRyxNQUFNLENBQUMsU0FBU0YsYUFBYTtZQUNwQ0csVUFBVVYsS0FBS1csZ0JBQWdCO1lBQy9CQyxhQUFhWixLQUFLYSxRQUFRO1FBQzVCO1FBRUEsYUFBYTtRQUNiLE1BQU1DLFdBQVcsTUFBTTVCLGlEQUFLQSxDQUFDQyxvQkFBb0I7WUFDL0M0QixRQUFRO1lBQ1JDLE1BQU1WO1FBQ1I7UUFFQSxNQUFNVyxTQUFTLE1BQU1ILFNBQVNJLElBQUk7UUFFbEMsSUFBSSxDQUFDRCxPQUFPRSxPQUFPLEVBQUU7WUFDbkJqQixRQUFRa0IsS0FBSyxDQUFDLGlCQUFpQkgsT0FBT0csS0FBSztZQUMzQyxPQUFPO2dCQUFDO29CQUNOaEIsT0FBTztvQkFDUEMsYUFBYTtnQkFDZjthQUFFO1FBQ0o7UUFFQUgsUUFBUUMsR0FBRyxDQUFDLFdBQVdjLE9BQU9JLE1BQU07UUFDcEMsT0FBT0osT0FBT0ksTUFBTTtJQUV0QixFQUFFLE9BQU9ELE9BQU87UUFDZGxCLFFBQVFrQixLQUFLLENBQUMsWUFBWUE7UUFDMUIsT0FBTztZQUFDO2dCQUNOaEIsT0FBTztnQkFDUEMsYUFBYTtZQUNmO1NBQUU7SUFDSjtBQUNGIiwic291cmNlcyI6WyJ3ZWJwYWNrOi8vc2NlbmVzb3VuZC8uL3V0aWxzL2ltYWdlQW5hbHlzaXMuanM/ODFkNyJdLCJzb3VyY2VzQ29udGVudCI6WyJpbXBvcnQgeyBwcm9taXNlcyBhcyBmcyB9IGZyb20gJ2ZzJztcclxuaW1wb3J0IHBhdGggZnJvbSAncGF0aCc7XHJcbmltcG9ydCBGb3JtRGF0YSBmcm9tICdmb3JtLWRhdGEnO1xyXG5pbXBvcnQgZmV0Y2ggZnJvbSAnbm9kZS1mZXRjaCc7XHJcblxyXG5jb25zdCBQWVRIT05fU0VSVklDRV9VUkwgPSAnaHR0cDovL2xvY2FsaG9zdDo1MDAwL2FuYWx5emUnO1xyXG5cclxuLy8g6aKE5a6a5LmJ55qE5Zy65pmv5YWz6ZSu6K+N5pig5bCEXHJcbmNvbnN0IFNDRU5FX0tFWVdPUkRTID0ge1xyXG4gIG5hdHVyZTogWyduYXR1cmUnLCAnZm9yZXN0JywgJ21vdW50YWluJywgJ2dhcmRlbicsICd0cmVlJywgJ2Zsb3dlcicsICdncmFzcycsICdwYXJrJywgJ2dyZWVuJywgJ25hdHVyYWwnXSxcclxuICBiZWFjaDogWydiZWFjaCcsICdvY2VhbicsICdzZWEnLCAnd2F2ZScsICdzYW5kJywgJ3N1bnNldCcsICdjb2FzdCcsICd0cm9waWNhbCcsICd3YXRlcicsICdzaG9yZSddLFxyXG4gIGNpdHk6IFsnY2l0eScsICd1cmJhbicsICdzdHJlZXQnLCAnYnVpbGRpbmcnLCAnZG93bnRvd24nLCAndHJhZmZpYycsICdtb2Rlcm4nLCAnYXJjaGl0ZWN0dXJlJywgJ3Rvd24nXSxcclxuICBuaWdodDogWyduaWdodCcsICdkYXJrJywgJ3N0YXInLCAnbW9vbicsICdldmVuaW5nJywgJ21pZG5pZ2h0JywgJ2xpZ2h0JywgJ2R1c2snXSxcclxuICBwYXJ0eTogWydwYXJ0eScsICdkYW5jZScsICdjZWxlYnJhdGlvbicsICdmdW4nLCAnZmVzdGl2YWwnLCAnY2x1YicsICdjb25jZXJ0JywgJ2Rpc2NvJ10sXHJcbiAgY2FsbTogWydjYWxtJywgJ3BlYWNlZnVsJywgJ3F1aWV0JywgJ3JlbGF4JywgJ21lZGl0YXRpb24nLCAnemVuJywgJ3NlcmVuaXR5JywgJ3RyYW5xdWlsJ10sXHJcbiAgZW5lcmdldGljOiBbJ2VuZXJnZXRpYycsICdhY3RpdmUnLCAnd29ya291dCcsICdleGVyY2lzZScsICdydW5uaW5nJywgJ2d5bScsICdzcG9ydCcsICdkeW5hbWljJ10sXHJcbiAgcm9tYW50aWM6IFsncm9tYW50aWMnLCAnbG92ZScsICdkYXRlJywgJ2NvdXBsZScsICd3ZWRkaW5nJywgJ2hlYXJ0JywgJ3Jvc2UnLCAncm9tYW5jZSddLFxyXG4gIG1lbGFuY2hvbGljOiBbJ3NhZCcsICdyYWluJywgJ2xvbmVseScsICdtZWxhbmNob2x5JywgJ25vc3RhbGdpYycsICdhdXR1bW4nLCAnd2ludGVyJywgJ2dyZXknXSxcclxuICBlcGljOiBbJ2VwaWMnLCAnZ3JhbmQnLCAnZHJhbWF0aWMnLCAncG93ZXJmdWwnLCAnaW50ZW5zZScsICdzdG9ybScsICdtYWplc3RpYycsICd2YXN0J11cclxufTtcclxuXHJcbmV4cG9ydCBhc3luYyBmdW5jdGlvbiBhbmFseXplSW1hZ2UoZmlsZSkge1xyXG4gIHRyeSB7XHJcbiAgICBpZiAoIWZpbGUgfHwgIWZpbGUuZmlsZXBhdGgpIHtcclxuICAgICAgY29uc29sZS5sb2coJ+aXoOaViOeahOaWh+S7tuWvueixoTonLCBmaWxlKTtcclxuICAgICAgcmV0dXJuIFt7XHJcbiAgICAgICAgc2NlbmU6ICdnZW5lcmFsJyxcclxuICAgICAgICBwcm9iYWJpbGl0eTogMC44XHJcbiAgICAgIH1dO1xyXG4gICAgfVxyXG5cclxuICAgIGNvbnNvbGUubG9nKCfmraPlnKjliIbmnpDlm77niYc6JywgZmlsZS5maWxlcGF0aCk7XHJcblxyXG4gICAgLy8g5Yib5bu6Rm9ybURhdGHlr7nosaFcclxuICAgIGNvbnN0IGZvcm1EYXRhID0gbmV3IEZvcm1EYXRhKCk7XHJcbiAgICBjb25zdCBpbWFnZVN0cmVhbSA9IGF3YWl0IGZzLnJlYWRGaWxlKGZpbGUuZmlsZXBhdGgpO1xyXG4gICAgZm9ybURhdGEuYXBwZW5kKCdpbWFnZScsIGltYWdlU3RyZWFtLCB7XHJcbiAgICAgIGZpbGVuYW1lOiBmaWxlLm9yaWdpbmFsRmlsZW5hbWUsXHJcbiAgICAgIGNvbnRlbnRUeXBlOiBmaWxlLm1pbWV0eXBlXHJcbiAgICB9KTtcclxuXHJcbiAgICAvLyDosIPnlKhQeXRob27mnI3liqFcclxuICAgIGNvbnN0IHJlc3BvbnNlID0gYXdhaXQgZmV0Y2goUFlUSE9OX1NFUlZJQ0VfVVJMLCB7XHJcbiAgICAgIG1ldGhvZDogJ1BPU1QnLFxyXG4gICAgICBib2R5OiBmb3JtRGF0YVxyXG4gICAgfSk7XHJcblxyXG4gICAgY29uc3QgcmVzdWx0ID0gYXdhaXQgcmVzcG9uc2UuanNvbigpO1xyXG4gICAgXHJcbiAgICBpZiAoIXJlc3VsdC5zdWNjZXNzKSB7XHJcbiAgICAgIGNvbnNvbGUuZXJyb3IoJ1B5dGhvbuacjeWKoei/lOWbnumUmeivrzonLCByZXN1bHQuZXJyb3IpO1xyXG4gICAgICByZXR1cm4gW3tcclxuICAgICAgICBzY2VuZTogJ2dlbmVyYWwnLFxyXG4gICAgICAgIHByb2JhYmlsaXR5OiAwLjhcclxuICAgICAgfV07XHJcbiAgICB9XHJcblxyXG4gICAgY29uc29sZS5sb2coJ+WcuuaZr+WIhuaekOe7k+aenDonLCByZXN1bHQuc2NlbmVzKTtcclxuICAgIHJldHVybiByZXN1bHQuc2NlbmVzO1xyXG5cclxuICB9IGNhdGNoIChlcnJvcikge1xyXG4gICAgY29uc29sZS5lcnJvcign5YiG5p6Q5Zu+54mH5pe25Ye66ZSZOicsIGVycm9yKTtcclxuICAgIHJldHVybiBbe1xyXG4gICAgICBzY2VuZTogJ2dlbmVyYWwnLFxyXG4gICAgICBwcm9iYWJpbGl0eTogMC44XHJcbiAgICB9XTtcclxuICB9XHJcbn0gIl0sIm5hbWVzIjpbInByb21pc2VzIiwiZnMiLCJwYXRoIiwiRm9ybURhdGEiLCJmZXRjaCIsIlBZVEhPTl9TRVJWSUNFX1VSTCIsIlNDRU5FX0tFWVdPUkRTIiwibmF0dXJlIiwiYmVhY2giLCJjaXR5IiwibmlnaHQiLCJwYXJ0eSIsImNhbG0iLCJlbmVyZ2V0aWMiLCJyb21hbnRpYyIsIm1lbGFuY2hvbGljIiwiZXBpYyIsImFuYWx5emVJbWFnZSIsImZpbGUiLCJmaWxlcGF0aCIsImNvbnNvbGUiLCJsb2ciLCJzY2VuZSIsInByb2JhYmlsaXR5IiwiZm9ybURhdGEiLCJpbWFnZVN0cmVhbSIsInJlYWRGaWxlIiwiYXBwZW5kIiwiZmlsZW5hbWUiLCJvcmlnaW5hbEZpbGVuYW1lIiwiY29udGVudFR5cGUiLCJtaW1ldHlwZSIsInJlc3BvbnNlIiwibWV0aG9kIiwiYm9keSIsInJlc3VsdCIsImpzb24iLCJzdWNjZXNzIiwiZXJyb3IiLCJzY2VuZXMiXSwic291cmNlUm9vdCI6IiJ9\n//# sourceURL=webpack-internal:///(api)/./utils/imageAnalysis.js\n");

/***/ }),

/***/ "(api)/./utils/spotify.js":
/*!**************************!*\
  !*** ./utils/spotify.js ***!
  \**************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   getSpotifyToken: () => (/* binding */ getSpotifyToken),\n/* harmony export */   searchTracks: () => (/* binding */ searchTracks)\n/* harmony export */ });\nconst SPOTIFY_CLIENT_ID = process.env.SPOTIFY_CLIENT_ID;\nconst SPOTIFY_CLIENT_SECRET = process.env.SPOTIFY_CLIENT_SECRET;\nasync function getSpotifyToken() {\n    try {\n        console.log(\"正在获取 Spotify 访问令牌...\");\n        console.log(\"Client ID:\", SPOTIFY_CLIENT_ID?.slice(0, 5) + \"...\");\n        console.log(\"Client Secret:\", SPOTIFY_CLIENT_SECRET ? \"已设置\" : \"未设置\");\n        const response = await fetch(\"https://accounts.spotify.com/api/token\", {\n            method: \"POST\",\n            headers: {\n                \"Content-Type\": \"application/x-www-form-urlencoded\",\n                \"Authorization\": \"Basic \" + Buffer.from(SPOTIFY_CLIENT_ID + \":\" + SPOTIFY_CLIENT_SECRET).toString(\"base64\")\n            },\n            body: \"grant_type=client_credentials\"\n        });\n        if (!response.ok) {\n            const errorText = await response.text();\n            console.error(\"获取令牌失败:\", response.status, errorText);\n            throw new Error(`获取 Spotify 令牌失败: ${response.status} - ${errorText}`);\n        }\n        const data = await response.json();\n        console.log(\"成功获取访问令牌\");\n        return data.access_token;\n    } catch (error) {\n        console.error(\"获取 Spotify 令牌时出错:\", error);\n        throw error;\n    }\n}\nasync function searchTracks(accessToken, style, limit = 5) {\n    try {\n        console.log(`正在搜索风格为 \"${style}\" 的歌曲...`);\n        const query = encodeURIComponent(`genre:${style}`);\n        const url = `https://api.spotify.com/v1/search?q=${query}&type=track&limit=${limit}`;\n        console.log(\"发送请求到:\", url);\n        const response = await fetch(url, {\n            headers: {\n                \"Authorization\": `Bearer ${accessToken}`\n            }\n        });\n        if (!response.ok) {\n            const errorText = await response.text();\n            console.error(\"搜索歌曲失败:\", response.status, errorText);\n            throw new Error(`搜索歌曲失败: ${response.status} - ${errorText}`);\n        }\n        const data = await response.json();\n        if (!data.tracks || !data.tracks.items) {\n            console.log(\"未找到歌曲:\", data);\n            return [];\n        }\n        const tracks = data.tracks.items.map((track)=>({\n                id: track.id,\n                name: track.name,\n                artist: track.artists[0].name,\n                albumImage: track.album.images[0]?.url,\n                previewUrl: track.preview_url,\n                spotifyUrl: track.external_urls.spotify\n            }));\n        console.log(`找到 ${tracks.length} 首歌曲`);\n        return tracks;\n    } catch (error) {\n        console.error(\"搜索歌曲时出错:\", error);\n        throw error;\n    }\n}\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,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QUcsQ0FBQyxDQUFDLEdBQUcsRUFBRTBCLE9BQU9nQixNQUFNLENBQUMsSUFBSSxDQUFDO1FBQ3JDLE9BQU9oQjtJQUNULEVBQUUsT0FBT2IsT0FBTztRQUNkZCxRQUFRYyxLQUFLLENBQUMsWUFBWUE7UUFDMUIsTUFBTUE7SUFDUjtBQUNGIiwic291cmNlcyI6WyJ3ZWJwYWNrOi8vc2NlbmVzb3VuZC8uL3V0aWxzL3Nwb3RpZnkuanM/NzIxNyJdLCJzb3VyY2VzQ29udGVudCI6WyJjb25zdCBTUE9USUZZX0NMSUVOVF9JRCA9IHByb2Nlc3MuZW52LlNQT1RJRllfQ0xJRU5UX0lEO1xyXG5jb25zdCBTUE9USUZZX0NMSUVOVF9TRUNSRVQgPSBwcm9jZXNzLmVudi5TUE9USUZZX0NMSUVOVF9TRUNSRVQ7XHJcblxyXG5leHBvcnQgYXN5bmMgZnVuY3Rpb24gZ2V0U3BvdGlmeVRva2VuKCkge1xyXG4gIHRyeSB7XHJcbiAgICBjb25zb2xlLmxvZygn5q2j5Zyo6I635Y+WIFNwb3RpZnkg6K6/6Zeu5Luk54mMLi4uJyk7XHJcbiAgICBjb25zb2xlLmxvZygnQ2xpZW50IElEOicsIFNQT1RJRllfQ0xJRU5UX0lEPy5zbGljZSgwLCA1KSArICcuLi4nKTtcclxuICAgIGNvbnNvbGUubG9nKCdDbGllbnQgU2VjcmV0OicsIFNQT1RJRllfQ0xJRU5UX1NFQ1JFVCA/ICflt7Lorr7nva4nIDogJ+acquiuvue9ricpO1xyXG5cclxuICAgIGNvbnN0IHJlc3BvbnNlID0gYXdhaXQgZmV0Y2goJ2h0dHBzOi8vYWNjb3VudHMuc3BvdGlmeS5jb20vYXBpL3Rva2VuJywge1xyXG4gICAgICBtZXRob2Q6ICdQT1NUJyxcclxuICAgICAgaGVhZGVyczoge1xyXG4gICAgICAgICdDb250ZW50LVR5cGUnOiAnYXBwbGljYXRpb24veC13d3ctZm9ybS11cmxlbmNvZGVkJyxcclxuICAgICAgICAnQXV0aG9yaXphdGlvbic6ICdCYXNpYyAnICsgQnVmZmVyLmZyb20oU1BPVElGWV9DTElFTlRfSUQgKyAnOicgKyBTUE9USUZZX0NMSUVOVF9TRUNSRVQpLnRvU3RyaW5nKCdiYXNlNjQnKVxyXG4gICAgICB9LFxyXG4gICAgICBib2R5OiAnZ3JhbnRfdHlwZT1jbGllbnRfY3JlZGVudGlhbHMnXHJcbiAgICB9KTtcclxuXHJcbiAgICBpZiAoIXJlc3BvbnNlLm9rKSB7XHJcbiAgICAgIGNvbnN0IGVycm9yVGV4dCA9IGF3YWl0IHJlc3BvbnNlLnRleHQoKTtcclxuICAgICAgY29uc29sZS5lcnJvcign6I635Y+W5Luk54mM5aSx6LSlOicsIHJlc3BvbnNlLnN0YXR1cywgZXJyb3JUZXh0KTtcclxuICAgICAgdGhyb3cgbmV3IEVycm9yKGDojrflj5YgU3BvdGlmeSDku6TniYzlpLHotKU6ICR7cmVzcG9uc2Uuc3RhdHVzfSAtICR7ZXJyb3JUZXh0fWApO1xyXG4gICAgfVxyXG5cclxuICAgIGNvbnN0IGRhdGEgPSBhd2FpdCByZXNwb25zZS5qc29uKCk7XHJcbiAgICBjb25zb2xlLmxvZygn5oiQ5Yqf6I635Y+W6K6/6Zeu5Luk54mMJyk7XHJcbiAgICByZXR1cm4gZGF0YS5hY2Nlc3NfdG9rZW47XHJcbiAgfSBjYXRjaCAoZXJyb3IpIHtcclxuICAgIGNvbnNvbGUuZXJyb3IoJ+iOt+WPliBTcG90aWZ5IOS7pOeJjOaXtuWHuumUmTonLCBlcnJvcik7XHJcbiAgICB0aHJvdyBlcnJvcjtcclxuICB9XHJcbn1cclxuXHJcbmV4cG9ydCBhc3luYyBmdW5jdGlvbiBzZWFyY2hUcmFja3MoYWNjZXNzVG9rZW4sIHN0eWxlLCBsaW1pdCA9IDUpIHtcclxuICB0cnkge1xyXG4gICAgY29uc29sZS5sb2coYOato+WcqOaQnOe0oumjjuagvOS4uiBcIiR7c3R5bGV9XCIg55qE5q2M5puyLi4uYCk7XHJcbiAgICBcclxuICAgIGNvbnN0IHF1ZXJ5ID0gZW5jb2RlVVJJQ29tcG9uZW50KGBnZW5yZToke3N0eWxlfWApO1xyXG4gICAgY29uc3QgdXJsID0gYGh0dHBzOi8vYXBpLnNwb3RpZnkuY29tL3YxL3NlYXJjaD9xPSR7cXVlcnl9JnR5cGU9dHJhY2smbGltaXQ9JHtsaW1pdH1gO1xyXG4gICAgXHJcbiAgICBjb25zb2xlLmxvZygn5Y+R6YCB6K+35rGC5YiwOicsIHVybCk7XHJcbiAgICBcclxuICAgIGNvbnN0IHJlc3BvbnNlID0gYXdhaXQgZmV0Y2godXJsLCB7XHJcbiAgICAgIGhlYWRlcnM6IHtcclxuICAgICAgICAnQXV0aG9yaXphdGlvbic6IGBCZWFyZXIgJHthY2Nlc3NUb2tlbn1gXHJcbiAgICAgIH1cclxuICAgIH0pO1xyXG5cclxuICAgIGlmICghcmVzcG9uc2Uub2spIHtcclxuICAgICAgY29uc3QgZXJyb3JUZXh0ID0gYXdhaXQgcmVzcG9uc2UudGV4dCgpO1xyXG4gICAgICBjb25zb2xlLmVycm9yKCfmkJzntKLmrYzmm7LlpLHotKU6JywgcmVzcG9uc2Uuc3RhdHVzLCBlcnJvclRleHQpO1xyXG4gICAgICB0aHJvdyBuZXcgRXJyb3IoYOaQnOe0ouatjOabsuWksei0pTogJHtyZXNwb25zZS5zdGF0dXN9IC0gJHtlcnJvclRleHR9YCk7XHJcbiAgICB9XHJcblxyXG4gICAgY29uc3QgZGF0YSA9IGF3YWl0IHJlc3BvbnNlLmpzb24oKTtcclxuICAgIFxyXG4gICAgaWYgKCFkYXRhLnRyYWNrcyB8fCAhZGF0YS50cmFja3MuaXRlbXMpIHtcclxuICAgICAgY29uc29sZS5sb2coJ+acquaJvuWIsOatjOabsjonLCBkYXRhKTtcclxuICAgICAgcmV0dXJuIFtdO1xyXG4gICAgfVxyXG5cclxuICAgIGNvbnN0IHRyYWNrcyA9IGRhdGEudHJhY2tzLml0ZW1zLm1hcCh0cmFjayA9PiAoe1xyXG4gICAgICBpZDogdHJhY2suaWQsXHJcbiAgICAgIG5hbWU6IHRyYWNrLm5hbWUsXHJcbiAgICAgIGFydGlzdDogdHJhY2suYXJ0aXN0c1swXS5uYW1lLFxyXG4gICAgICBhbGJ1bUltYWdlOiB0cmFjay5hbGJ1bS5pbWFnZXNbMF0/LnVybCxcclxuICAgICAgcHJldmlld1VybDogdHJhY2sucHJldmlld191cmwsXHJcbiAgICAgIHNwb3RpZnlVcmw6IHRyYWNrLmV4dGVybmFsX3VybHMuc3BvdGlmeVxyXG4gICAgfSkpO1xyXG5cclxuICAgIGNvbnNvbGUubG9nKGDmib7liLAgJHt0cmFja3MubGVuZ3RofSDpppbmrYzmm7JgKTtcclxuICAgIHJldHVybiB0cmFja3M7XHJcbiAgfSBjYXRjaCAoZXJyb3IpIHtcclxuICAgIGNvbnNvbGUuZXJyb3IoJ+aQnOe0ouatjOabsuaXtuWHuumUmTonLCBlcnJvcik7XHJcbiAgICB0aHJvdyBlcnJvcjtcclxuICB9XHJcbn0gIl0sIm5hbWVzIjpbIlNQT1RJRllfQ0xJRU5UX0lEIiwicHJvY2VzcyIsImVudiIsIlNQT1RJRllfQ0xJRU5UX1NFQ1JFVCIsImdldFNwb3RpZnlUb2tlbiIsImNvbnNvbGUiLCJsb2ciLCJzbGljZSIsInJlc3BvbnNlIiwiZmV0Y2giLCJtZXRob2QiLCJoZWFkZXJzIiwiQnVmZmVyIiwiZnJvbSIsInRvU3RyaW5nIiwiYm9keSIsIm9rIiwiZXJyb3JUZXh0IiwidGV4dCIsImVycm9yIiwic3RhdHVzIiwiRXJyb3IiLCJkYXRhIiwianNvbiIsImFjY2Vzc190b2tlbiIsInNlYXJjaFRyYWNrcyIsImFjY2Vzc1Rva2VuIiwic3R5bGUiLCJsaW1pdCIsInF1ZXJ5IiwiZW5jb2RlVVJJQ29tcG9uZW50IiwidXJsIiwidHJhY2tzIiwiaXRlbXMiLCJtYXAiLCJ0cmFjayIsImlkIiwibmFtZSIsImFydGlzdCIsImFydGlzdHMiLCJhbGJ1bUltYWdlIiwiYWxidW0iLCJpbWFnZXMiLCJwcmV2aWV3VXJsIiwicHJldmlld191cmwiLCJzcG90aWZ5VXJsIiwiZXh0ZXJuYWxfdXJscyIsInNwb3RpZnkiLCJsZW5ndGgiXSwic291cmNlUm9vdCI6IiJ9\n//# sourceURL=webpack-internal:///(api)/./utils/spotify.js\n");

/***/ })

};
;

// load runtime
var __webpack_require__ = require("../../webpack-api-runtime.js");
__webpack_require__.C(exports);
var __webpack_exec__ = (moduleId) => (__webpack_require__(__webpack_require__.s = moduleId))
var __webpack_exports__ = __webpack_require__.X(0, ["vendor-chunks/next"], () => (__webpack_exec__("(api)/./node_modules/next/dist/build/webpack/loaders/next-route-loader/index.js?kind=PAGES_API&page=%2Fapi%2Fanalyze-combined&preferredRegion=&absolutePagePath=.%2Fpages%5Capi%5Canalyze-combined.js&middlewareConfigBase64=e30%3D!")));
module.exports = __webpack_exports__;

})();